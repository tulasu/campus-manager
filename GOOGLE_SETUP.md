# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Service Account

## –ß—Ç–æ —Ç–∞–∫–æ–µ GOOGLE_SERVICE_ACCOUNT?

–≠—Ç–æ –ø—É—Ç—å –∫ JSON-—Ñ–∞–π–ª—É —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Google –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Google Sheets API.

## üìã –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å JSON-—Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Google Cloud –ø—Ä–æ–µ–∫—Ç–∞
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ó–∞–ø–æ–º–Ω–∏—Ç–µ ID –ø—Ä–æ–µ–∫—Ç–∞

### 2. –í–∫–ª—é—á–µ–Ω–∏–µ Google Sheets API
1. –í –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **APIs & Services** ‚Üí **Library**
2. –ù–∞–π–¥–∏—Ç–µ **Google Sheets API**
3. –ù–∞–∂–º–∏—Ç–µ **Enable**

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **IAM & Admin** ‚Üí **Service Accounts**
2. –ù–∞–∂–º–∏—Ç–µ **Create Service Account**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **Name**: `campus-manager-service`
   - **Service account ID**: `campus-manager-service@your-project-id.iam.gserviceaccount.com`
   - **Description**: `Service account for Campus Manager app`
4. –ù–∞–∂–º–∏—Ç–µ **Create and Continue**

### 4. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
1. –í —Ä–∞–∑–¥–µ–ª–µ **Role** –≤—ã–±–µ—Ä–∏—Ç–µ:
   - **Project** ‚Üí **Editor** (–ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç)
   - –ò–ª–∏ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π: **Google Sheets** ‚Üí **Google Sheets API Editor**
2. –ù–∞–∂–º–∏—Ç–µ **Continue** ‚Üí **Done**

### 5. –°–æ–∑–¥–∞–Ω–∏–µ JSON-–∫–ª—é—á–∞
1. –í —Å–ø–∏—Å–∫–µ —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –Ω–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ ‚Üí –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Keys**
3. –ù–∞–∂–º–∏—Ç–µ **Add Key** ‚Üí **Create new key**
4. –í—ã–±–µ—Ä–∏—Ç–µ **JSON** –∏ –Ω–∞–∂–º–∏—Ç–µ **Create**
5. JSON-—Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç—Å—è

## üìÅ –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

1. **–ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª** –≤ `service_account.json`
2. **–ü–æ–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞**:

```
campus-manager/
‚îú‚îÄ‚îÄ service_account.json    ‚Üê –°–Æ–î–ê!
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ main.py
‚îî‚îÄ‚îÄ ...
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ —É–∫–∞–∂–∏—Ç–µ:

```bash
# –ü—É—Ç—å –∫ JSON-—Ñ–∞–π–ª—É (–µ—Å–ª–∏ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
GOOGLE_SERVICE_ACCOUNT=service_account.json

# ID –≤–∞—à–µ–π Google —Ç–∞–±–ª–∏—Ü—ã
GOOGLE_SHEET_ID=1Gmn0YiKvs_VG9nLmLl25eGTwCvgL494r7F6QUVcI03Q

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DB_CONNECTION_URL=sqlite:///database.db
```

## üîç –ö–∞–∫ –Ω–∞–π—Ç–∏ GOOGLE_SHEET_ID?

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É Google —Ç–∞–±–ª–∏—Ü—É, ID –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ URL:
```
https://docs.google.com/spreadsheets/d/{–≠–¢–û_–ì–û–°–£–î–ê–†–°–¢–í–ï–ù–ù–´–ô_ID}/edit
```

–ü—Ä–∏–º–µ—Ä:
```
https://docs.google.com/spreadsheets/d/1Gmn0YiKvs_VG9nLmLl25eGTwCvgL494r7F6QUVcI03Q/edit
```
ID: `1Gmn0YiKvs_VG9nLmLl25eGTwCvgL494r7F6QUVcI03Q`

## üìä –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ

**–í–ê–ñ–ù–û:** –ù—É–∂–Ω–æ –¥–∞—Ç—å –¥–æ—Å—Ç—É–ø —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –∫ –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü–µ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Google —Ç–∞–±–ª–∏—Ü—É
2. –ù–∞–∂–º–∏—Ç–µ **Share** ‚Üí **Share with people and groups**
3. –í–≤–µ–¥–∏—Ç–µ email —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (–∏–∑ JSON-—Ñ–∞–π–ª–∞, –ø–æ–ª–µ `client_email`)
   ```
   campus-manager-service@your-project-id.iam.gserviceaccount.com
   ```
4. –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ **Editor**
5. –ù–∞–∂–º–∏—Ç–µ **Send**

## üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–í–∞—à JSON-—Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–µ –ø–æ–ª—è:
```json
{
  "type": "service_account",
  "project_id": "your-project-id",
  "private_key_id": "...",
  "private_key": "-----BEGIN PRIVATE KEY-----\n...",
  "client_email": "campus-manager-service@your-project-id.iam.gserviceaccount.com",
  "client_id": "...",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token"
}
```

## üö™ –ü—Ä–∏–º–µ—Ä –≥–æ—Ç–æ–≤–æ–≥–æ .env

```bash
GOOGLE_SERVICE_ACCOUNT=service_account.json
GOOGLE_SHEET_ID=1Gmn0YiKvs_VG9nLmLl25eGTwCvgL494r7F6QUVcI03Q
DB_CONNECTION_URL=sqlite:///database.db
```

## ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ `service_account.json` –≤ Git!
- –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `.gitignore`
- –•—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ - –æ–Ω –¥–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–∏–º Google Sheets

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–∏—Å—Ç–æ–≤ Google Sheets

**–õ–∏—Å—Ç 1: `students_distribution`**
```
–§–ò–û | –ü–æ–ª | –ò–Ω—Å—Ç–∏—Ç—É—Ç | –°–í–û | –ß–ê–≠–° | –ò–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å | –ö—É—Ä–µ–Ω–∏–µ | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ | –ú–Ω–æ–≥–æ–¥–µ—Ç–Ω–∞—è —Å–µ–º—å—è
–ò–≤–∞–Ω–æ–≤ | –ú | –ò–ü–ú–ö–ù | 0 | 0 | 0 | 0 | 50 | 1
–ü–µ—Ç—Ä–æ–≤ | –ú | –î—Ä—É–≥–æ–µ | 0 | 0 | 0 | 1 | 25 | 0
```

**–õ–∏—Å—Ç 2: `weights`**
```
–ò–Ω—Å—Ç–∏—Ç—É—Ç | –ë–∞–ª–ª—ã –∑–∞ –∏–Ω—Å—Ç–∏—Ç—É—Ç | –°–í–û | –ß–ê–≠–° | –ò–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ | –ú–Ω–æ–≥–æ–¥–µ—Ç–Ω–∞—è —Å–µ–º—å—è
–ò–ü–ú–ö–ù | 1 | 1 | 1 | 1 | 1 | 1
–ì–æ—Ä–Ω—ã–π | 1 | 1 | 1 | 1 | 1 | 1
–î—Ä—É–≥–æ–π | 1 | 1 | 1 | 1 | 1 | 1
```

**–õ–∏—Å—Ç 3: `ranking`** - —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–∞—à–µ–π Google —Ç–∞–±–ª–∏—Ü–µ–π!